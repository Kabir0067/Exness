# ğŸš€ QuantCore Pro: Institutional AI Trading System
## XAUUSDm â€¢ BTCUSDm â€¢ Exness MT5

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ•—   â–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ•—   â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â•‘
â•‘ â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ–ˆâ–ˆâ•—  â–ˆâ–ˆâ•‘â•šâ•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•”â•â•â•â•â•â–ˆâ–ˆâ•”â•â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•â•â• â•‘
â•‘ â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â–ˆâ–ˆâ•— â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—   â•‘
â•‘ â–ˆâ–ˆâ•‘â–„â–„ â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘â•šâ–ˆâ–ˆâ•—â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘     â–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆâ•”â•â•â•   â•‘
â•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ•‘ â•šâ–ˆâ–ˆâ–ˆâ–ˆâ•‘   â–ˆâ–ˆâ•‘   â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•—â•šâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â•‘
â•‘  â•šâ•â•â–€â–€â•â•  â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•  â•šâ•â•â•â•   â•šâ•â•    â•šâ•â•â•â•â•â• â•šâ•â•â•â•â•â• â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â• â•‘
â•‘                                                                                 â•‘
â•‘                    ğŸ† PROFESSIONAL ALGORITHMIC TRADING SYSTEM ğŸ†                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸŒŸ Overview

**QuantCore Pro** is a production-grade algorithmic trading system for Exness MetaTrader 5. It executes independent **multi-timeframe scalping strategies** for Gold (XAU) and Bitcoin (BTC) with institutional-level risk management and AI-powered analysis.

### âœ¨ Highlights

| Feature | Description |
|---------|-------------|
| ğŸ¯ **Dual-Asset Trading** | XAU and BTC operate independently in parallel |
| ğŸ§  **AI Neural Scoring** | 6-layer ensemble model with divergence detection |
| ğŸ“Š **6 Timeframe Analysis** | M1, M5, M15, H1, H4, D1 multi-timeframe fusion |
| ğŸ›¡ï¸ **3-Phase Risk Regime** | Adaptive A/B/C system with automatic UTC reset |
| ğŸ¯ **Sniper Filters** | Volume, momentum, spread, and MTF validation gates |
| âš¡ **Non-Blocking I/O** | Telegram decoupled from trading loop |
| ğŸ¤– **Telegram Bot** | Full control panel with real-time notifications |
| ğŸ“ˆ **God Tier Detection** | Rare high-probability entry identification |

---

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            QUANTCORE PRO ARCHITECTURE                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   MT5 API    â”‚â”€â”€â”€â–¶â”‚  Data Feed   â”‚â”€â”€â”€â–¶â”‚ Rate Cache   â”‚                   â”‚
â”‚  â”‚   Exness     â”‚    â”‚  M1-D1 Bars  â”‚    â”‚  800 bars    â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚         â”‚                    â”‚                   â”‚                          â”‚
â”‚         â–¼                    â–¼                   â–¼                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚                    FEATURE ENGINE                            â”‚            â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚            â”‚
â”‚  â”‚  â”‚  EMA    â”‚ â”‚  RSI    â”‚ â”‚  ADX    â”‚ â”‚  MACD   â”‚            â”‚            â”‚
â”‚  â”‚  â”‚ 9/21/50 â”‚ â”‚ Period  â”‚ â”‚ Trend   â”‚ â”‚ Diverg  â”‚            â”‚            â”‚
â”‚  â”‚  â”‚  /200   â”‚ â”‚   14    â”‚ â”‚   14    â”‚ â”‚ 12/26/9 â”‚            â”‚            â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚            â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚            â”‚
â”‚  â”‚  â”‚   FVG   â”‚ â”‚ Liqui-  â”‚ â”‚ Order   â”‚ â”‚ Round   â”‚            â”‚            â”‚
â”‚  â”‚  â”‚  Gaps   â”‚ â”‚ Sweep   â”‚ â”‚ Block   â”‚ â”‚ Numbers â”‚            â”‚            â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                              â”‚                                               â”‚
â”‚                              â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚                     SIGNAL ENGINE                            â”‚            â”‚
â”‚  â”‚                                                               â”‚            â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚            â”‚
â”‚  â”‚  â”‚ Ensemble Score  â”‚â”€â”€â–¶â”‚ MTF Alignment   â”‚                   â”‚            â”‚
â”‚  â”‚  â”‚  net: -1 to +1  â”‚   â”‚  Score: 0-6/6   â”‚                   â”‚            â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚            â”‚
â”‚  â”‚          â”‚                     â”‚                              â”‚            â”‚
â”‚  â”‚          â–¼                     â–¼                              â”‚            â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚            â”‚
â”‚  â”‚  â”‚         CONFIDENCE CALCULATOR           â”‚                 â”‚            â”‚
â”‚  â”‚  â”‚  Divergence Boost â€¢ MTF Boost â€¢ Caps    â”‚                 â”‚            â”‚
â”‚  â”‚  â”‚       Output: 0-98% Confidence          â”‚                 â”‚            â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                              â”‚                                               â”‚
â”‚                              â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚                    SNIPER FILTERS                            â”‚            â”‚
â”‚  â”‚  âœ“ Volume Check    âœ“ Spread Check    âœ“ MTF Gate            â”‚            â”‚
â”‚  â”‚  âœ“ Tick Freshness  âœ“ ADX Trend       âœ“ Anomaly Block       â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                              â”‚                                               â”‚
â”‚                              â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚                    RISK MANAGER                              â”‚            â”‚
â”‚  â”‚  Phase A: Normal  â”‚  Phase B: Protective  â”‚  Phase C: STOP  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                              â”‚                                               â”‚
â”‚                              â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚                   ORDER EXECUTOR                             â”‚            â”‚
â”‚  â”‚    MT5_LOCK â€¢ ATR-Based SL/TP â€¢ Retry Logic â€¢ Slippage      â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                              â”‚                                               â”‚
â”‚                              â–¼                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚  â”‚   Telegram   â”‚â—€â”€â”€â”€â”‚ Notify Queue â”‚â—€â”€â”€â”€â”‚   Engine     â”‚                   â”‚
â”‚  â”‚     Bot      â”‚    â”‚ Fire-Forget  â”‚    â”‚   Control    â”‚                   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ï¿½ AI Neural Scoring System

### Multi-Timeframe Analysis (MTF)

The system analyzes **6 timeframes** for each trade decision:

| # | Timeframe | Purpose | Weight |
|---|-----------|---------|--------|
| 1 | **M1** | Entry precision | +1 point |
| 2 | **M5** | Short-term trend | +1 point (+1 if strong ADX) |
| 3 | **M15** | Medium-term trend | +1 point (+1 if strong ADX) |
| 4 | **H1** | HTF trend gate | Block/Allow |
| 5 | **H4** | Macro trend | Analysis |
| 6 | **D1** | Global direction | Analysis |

### MTF Score Interpretation

```
mtf:6/6 = Perfect alignment   â†’ +5% confidence boost
mtf:5/6 = Strong alignment    â†’ +3% confidence boost  
mtf:4/6 = Good alignment      â†’ +1% confidence boost
mtf:2/6 = Weak alignment      â†’ -10% confidence penalty
```

### Ensemble Score Components

| Component | Description | Range |
|-----------|-------------|-------|
| **Net Score** | Weighted indicator fusion | -1.0 to +1.0 |
| **Divergence** | RSI/MACD price divergence | bullish/bearish/none |
| **Confluence** | Sweep + Divergence combo | Boost multiplier |
| **Extreme Guard** | Overbought/oversold filter | Block/Allow |

### Confidence Calculation

```python
# Base confidence from ensemble
net_norm, conf = _ensemble_score(indicators, book, tick_stats)

# Confluence boost (sweep + divergence)
if has_confluence and net_abs >= 0.15:
    conf = min(92, conf * 1.12)  # +12% boost

# MTF alignment adjustment  
if mtf_score >= 6:
    conf = min(98, conf * 1.05)  # Perfect: +5%
elif mtf_score <= 2:
    conf = max(0, conf * 0.90)   # Weak: -10%

# Strength caps
if net_abs < 0.08:  conf = min(80, conf)
if net_abs < 0.12:  conf = min(88, conf)
if net_abs < 0.18:  conf = min(95, conf)
```

### ğŸ¯ God Tier Detection

Rare, high-probability setups identified when:

| Condition | Buy | Sell |
|-----------|-----|------|
| Order Block | bull_ob | bear_ob |
| RSI Zone | < 35 (oversold) | > 65 (overbought) |
| Divergence | Bullish | Bearish |
| H1 Trend | Not bearish | Not bullish |

---

## ğŸ›¡ï¸ Risk Management: 3-Phase Regime

The system enforces adaptive risk limits that **reset daily at 00:00 UTC**.

### ğŸŸ¢ Phase A: Normal Trading

| Parameter | XAU | BTC |
|-----------|-----|-----|
| Confidence Threshold | â‰¥55% | â‰¥55% |
| Max Lot | 0.05 | 0.01 |
| Multi-Order | Up to 3 | Up to 2 |
| Daily Loss Limit | 2% | 3% |

### ğŸŸ¡ Phase B: Protective Mode

**Trigger**: Daily P&L hits Â±target OR drawdown exceeds warning threshold

| Parameter | Change |
|-----------|--------|
| Lot Size | Reduced 50% |
| Confidence | â‰¥75% required |
| Multi-Order | Disabled (max 1) |

### ğŸ”´ Phase C: Hard Stop

**Trigger**: Daily loss exceeds max threshold (5% XAU / 6% BTC)

| Behavior | Description |
|----------|-------------|
| Trading | **Completely blocked** |
| Analysis | Still runs (monitoring mode) |
| Signals | Sent to Telegram (no execution) |
| Reset | Automatic at 00:00 UTC |

---

## ğŸ¯ Sniper Filter System

All signals pass through institutional-grade filters:

### 1. Volume Filter
```python
# Skip check for first 15 seconds of new bar
if bar_age_sec < 15.0:
    pass  # Volume still building
else:
    if current_vol < vol_ma * 0.8:
        return REJECT("low_volume", "sniper_reject")
```

### 2. MTF Gate
```python
# Buy requires M5 bullish AND M15 NOT bearish
trend_ok_buy = m5_bullish and (not m15_bearish)

# Sell requires M5 bearish AND M15 NOT bullish  
trend_ok_sell = m5_bearish and (not m15_bullish)
```

### 3. Spread Filter
```python
if spread_pct > max_spread_pct:
    return REJECT("spread_high", "risk_block")
```

### 4. Tick Freshness
```python
if tick_age_sec > 5.0:
    return REJECT("stale_data", "data_block")
```

### 5. Anomaly Detection
- Range spike detection
- Wick spike (manipulation) 
- Gap jump detection
- Stop-run rejection

---

## ğŸ“Š Signal Lifecycle

### Signal Duration
| Timeframe | Validity |
|-----------|----------|
| **M1 Signal** | 1-5 minutes |
| **M5 Confirmation** | 5-15 minutes |
| **M15 Trend** | 15-60 minutes |

### Order Duration
| Scenario | Expected Duration |
|----------|-------------------|
| Active Market (London/NY) | 1-5 minutes |
| Slow Market (Asia) | 5-15 minutes |
| Range Market | 15+ minutes or SL |

### Execution Speed
| Metric | Value |
|--------|-------|
| Signal Generation | 10-30ms |
| Order Placement | <100ms |
| Total Latency | <200ms |

---

## ğŸ’¬ Telegram Bot Dashboard

### ğŸ“± Control Panel

| Button | Function |
|--------|----------|
| âœ… **ĞÒ“Ğ¾Ğ·** | Start trading |
| ğŸ›‘ **ÒšĞ°Ñ‚ÑŠ** | Stop trading (monitoring mode) |
| ğŸ“Š **Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ** | Engine status |
| ğŸ’° **Ğ‘Ğ°Ğ»Ğ°Ğ½Ñ** | Account balance |
| ğŸ“ˆ **Ğ¢Ğ°ÑŠÑ€Ğ¸Ñ…** | Trading history |
| ğŸ¤– **AI** | AI analysis menu |

### ğŸ“‹ Commands

| Command | Description |
|---------|-------------|
| `/start` | Welcome + control panel |
| `/status` | Live engine status |
| `/balance` | Account balance |
| `/history` | Full trading history |
| `/ai` | AI market analysis |
| `/buttons` | Show control panel |

### ğŸ”” Notifications

| Event | Format |
|-------|--------|
| ğŸŸ¢ **Buy Signal** | Asset, Price, SL/TP, Confidence% |
| ï¿½ **Sell Signal** | Asset, Price, SL/TP, Confidence% |
| ï¿½ **Trade Closed** | Profit/Loss, Duration |
| ğŸ”„ **Phase Change** | Aâ†’B, Bâ†’C with reason |
| ğŸ›‘ **Hard Stop** | Automatic block alert |

---

## âš™ï¸ Technical Specifications

### Signal Engine
| Component | Specification |
|-----------|---------------|
| Timeframes | M1, M5, M15, H1, H4, D1 |
| Indicators | EMA, RSI, ADX, MACD, Bollinger |
| Patterns | FVG, Liquidity Sweep, Order Block |
| Confidence | 0-98% normalized output |

### Order Execution
| Parameter | Value |
|-----------|-------|
| SL/TP Calculation | ATR-based + USD target |
| Default Lot | 0.02 |
| Default TP | +5 USD |
| P95 Latency | <200ms |
| Max Slippage | 20 points |

### Data Pipeline
| Metric | Value |
|--------|-------|
| Loop Interval | ~2 seconds |
| Tick Age Threshold | 5 seconds |
| Bar Cache | 800 bars per asset |
| Dynamic Sleep | Skips when catching up |

---

## ğŸš€ Quick Start

### Prerequisites
- Python 3.12+
- MetaTrader 5 (Exness Terminal)
- Windows OS (MT5 requirement)

### Installation
```bash
git clone <repo>
cd Exness
pip install -r requirements.txt
```

### Configuration (.env)
```ini
EXNESS_LOGIN=12345678
EXNESS_PASSWORD=your_password
EXNESS_SERVER=Exness-MT5Real
BOT_TOKEN=123456:ABC-DEF...
ADMIN_ID=987654321
```

### Run
```bash
# Full mode (with Telegram)
python main.py

# Headless mode (VPS)
python main.py --headless

# Engine only (no Telegram)
python main.py --engine-only
```

---

## ğŸ“Š Monitoring & Logs

### Log Files
| File | Content |
|------|---------|
| `portfolio_engine_health.log` | Pipeline stages, signals, orders |
| `portfolio_engine_error.log` | Errors and exceptions |
| `portfolio_engine_diag.jsonl` | Diagnostic JSON data |

### Log Patterns
```
PIPELINE_STAGE | step=market_data ok_xau=True age_xau=0.1s
PIPELINE_STAGE | step=signals asset=XAU signal=Buy confidence=87
ORDER_SELECTED | asset=XAU signal=Buy conf=87 lot=0.02
TRADE_CLOSED | asset=XAU profit=+$5.20 duration=3m
PHASE_CHANGE | asset=XAU old=A new=B reason=daily_target
```

### Understanding Signals
```
reasons=net:-0.380,mtf:1/6,phase:A
        â”‚         â”‚       â”‚
        â”‚         â”‚       â””â”€â”€ Risk phase (A=normal)
        â”‚         â””â”€â”€ MTF alignment (1 of 6)
        â””â”€â”€ Net score (bearish -0.38)
```

---

## âœ… Production Readiness

| Feature | Status | Details |
|---------|--------|---------|
| Monday Wake-Up | âœ… | Auto-detects market open |
| 00:00 UTC Reset | âœ… | Daily stats and phases reset |
| Concurrency | âœ… | `MT5_LOCK` protects all API calls |
| Non-Blocking | âœ… | Telegram decoupled from loop |
| Stale Data Guard | âœ… | 5-second tick freshness |
| Dynamic Sleep | âœ… | Skips sleep when catching up |

---

## âš ï¸ Risk Disclaimer

> **HIGH RISK INVESTMENT WARNING**
>
> This software is for educational and research purposes. Financial trading involves significant risk of loss.
>
> - **No Guarantee**: Past performance does not indicate future results
> - **Software Risk**: Bugs, network issues, or broker rejections can cause losses
> - **Market Risk**: Volatile markets can result in rapid capital loss
> - **Liability**: Authors assume no responsibility for financial damages
>
> **USE AT YOUR OWN RISK**

---

## ğŸ‘¨â€ğŸ’» Author

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                               â•‘
â•‘   ğŸ‘¤ Gafurov Kabir                                           â•‘
â•‘   ğŸ Python Developer | Django Back-end                      â•‘
â•‘   ğŸ“Š XAU â€¢ BTC â€¢ USD | Trade Analyst                         â•‘
â•‘   ğŸ¢ Exness MT5 | Global Markets                             â•‘
â•‘   ğŸ‡¹ğŸ‡¯ Tajikistan                                             â•‘
â•‘   ğŸ“… 2026                                                     â•‘
â•‘                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

<div align="center">

### âš¡ Built with precision for institutional-grade execution âš¡

**QuantCore Pro** â€” *Where AI meets Trading*

</div>